# Settings.
# * Make delay shorter.
set -sg escape-time 0

# * Mouse support.
set -g mouse on

# Keybindings.
# * Source config.
bind S source-file ~/.tmux.conf \; display "Tmux config was sourced!"

# * Prefix remapping.
unbind C-b
set-option -g prefix C-t 
bind-key C-t send-prefix

# * Panes.
# ! They work differently in comparison with vim. By orientation of a split
#   I understand an orientation of a line that splits window into two.
# - Horizontal split.
unbind '"'
bind s split-window -v

# - Vertical split.
unbind %
bind v split-window -h

# - Moving to pane.
bind h select-pane -L
bind l select-pane -R
bind j select-pane -D
bind k select-pane -U

# - Resizing pane.
bind left resize-pane -L 10
bind right resize-pane -R 10
bind down resize-pane -D 10
bind up resize-pane -U 10

# - Close pane without confirmation.
bind-key x kill-pane

# * Copy mode.
set-window-option -g mode-keys vi

unbind [
bind Escape copy-mode

# - Copy selected text.
#bind -T vi-copy 'y' copy-selection

# - Paste copied text.
unbind p
bind p paste-buffer

######################
### DESIGN CHANGES ###
######################
# Preliminary Note: use 'colour' instead of 'color' even though the support for
# \ the second is being added, it's still not complete.
# Settings.
# tmux-256color supports italics. 
set -g default-terminal "tmux-256color"
## Tell tmux that outside terminal supports true color.
set -ga terminal-overrides ",xterm-256color*:Tc"

# ----- Configuring Powerline theme. ------
# (overriding default look)
# https://github.com/jimeh/tmux-themepack/blob/master/powerline/default/gray.tmuxtheme
# Tmux echos and Right-Left (Session).
set -goq @powerline-color-main-1 colour2
# # Statusbar.
set -g @themepack-status-left-area-left-format "[ #S ]"
# ?
set -goq @powerline-color-main-3 colour0

# - Right 
set -goq @powerline-color-grey-1 colour253
# - Middle (dubuntus).
set -goq @powerline-color-grey-2 colour250

# Active tab bg.
set -goq @powerline-color-black-1 colour0
# Active tab fg.
set -goq @powerline-color-main-2 colour2

# - Middle (background and background of inactive tabs).
set -goq @powerline-color-grey-3 colour245

# Statusbar fg also Left-Right (tab:pane) and Right-Left (Time).
# 243
set -goq @powerline-color-grey-4 colour243
# Left-Middle (dubuntus) and Right-Middle (Date)
# 240
set -goq @powerline-color-grey-5 colour4
# Right-Right (DS13).
# 238
set -goq @powerline-color-grey-6 colour6

#set -goqF @powerline-status-right-area-left-fg "#{@powerline-color-main-3}"
# Powerline options
#set -goqF @powerline-color-activity-1 "#{@powerline-color-grey-6}"
#set -goqF @powerline-status-bg "#{@powerline-color-grey-1}"
set -goqF @powerline-status-fg "#{@powerline-color-grey-5}"
set -goqF @powerline-status-left-area-left-bg colour166
#set -goqF @powerline-status-left-area-left-fg "#{@powerline-status-bg}"
#set -goqF @powerline-status-left-area-middle-bg "#{@powerline-status-fg}"
#set -goqF @powerline-status-left-area-middle-fg "#{@powerline-status-bg}"
#set -goqF @powerline-status-left-area-right-bg "#{@powerline-color-grey-2}"
#set -goqF @powerline-status-left-area-right-fg "#{@powerline-status-fg}"
#set -goqF @powerline-status-left-bg "#{@powerline-color-grey-1}"
#set -goqF @powerline-status-left-fg "#{@powerline-color-grey-5}"
#set -goqF @powerline-status-right-area-left-bg "#{@powerline-color-grey-2}"
#set -goqF @powerline-status-right-area-left-fg "#{@powerline-status-fg}"
#set -goqF @powerline-status-right-area-middle-bg "#{@powerline-status-fg}"
#set -goqF @powerline-status-right-area-middle-fg "#{@powerline-status-bg}"
#set -goqF @powerline-status-right-area-right-bg "#{@powerline-color-grey-6}"
#set -goqF @powerline-status-right-area-right-fg "#{@powerline-status-bg}"
#set -goqF @powerline-status-right-bg "#{@powerline-color-grey-1}"
#set -goqF @powerline-status-right-fg "#{@powerline-color-grey-5}"

# # Panes
# * Active.
set -goq  @theme-pane-active-border-bg "#{@powerline-color-main-1}"
set -goqF @theme-pane-active-border-fg "#{@powerline-color-main-1}"
# * Inactive.
set -goq  @theme-pane-border-bg "#{@powerline-color-grey-4}"
set -goqF @theme-pane-border-fg "#{@powerline-color-grey-4}"


# Powerline theme.
set -g @plugin 'jimeh/tmux-themepack'
set -g @themepack 'powerline/default/gray'

## Highlight window when it has new activity.
##setw -g monitor-activity on
##set -g visual-activity on
## Colors.
## ----- Default look. ------
## # Statusbar.
## * General
#set-option -g status-bg colour2
#set-option -g status-fg colour254
## * Left side.
## - Session.
#set-window-option -g status-left "#[fg=colour58,bg=colour185][ #S ]#[bg=colour2] "

## - Current window.
#set-window-option -g window-status-current-style 'fg=colour0 bg=colour2 bold'

## * Right side.
## - Host, date, time.
#set-option -g status-right '\
  ##[fg=colour8,bg=colour2] #h \
  ##[fg=colour0,bg=colour2] %H:%M\
  ##[fg=colour8,bg=colour2] %Y/%m/%d '

# # Panes.
# * Inactive.
# - Border.
set-option -g pane-border-style 'fg=colour254 bg=colour254'

# - Inner part.
set-window-option -g window-style 'fg=colour239,bg=colour255'

# * Active.
# - Border.
set-option -g pane-active-border-style 'fg=colour136 bg=colour136'

# - Inner part.
set-window-option -g window-active-style 'fg=colour239,bg=colour0'
#set-window-option -g window-status-current-fg magenta
#set-window-option -g window-status-current-bg black
# - Active pane.
#set -g pane-border-fg color1
#set -g pane-border-bg color81
#set -g pane-active-border-fg color163
#set -g pane-active-border-bg color230

## loud or quiet?
#set -g visual-activity off
#set -g visual-bell off
#set -g visual-silence off
#setw -g monitor-activity off
#set -g bell-action none

##  modes
#setw -g clock-mode-colour colour5
#setw -g mode-style 'fg=colour1 bg=colour18 bold'

## panes
#set -g pane-border-style 'fg=colour19 bg=colour0'
#set -g pane-active-border-style 'bg=colour0 fg=colour9'

## statusbar
#set -g status-position bottom
#set -g status-justify left
#set -g status-style 'bg=colour18 fg=colour137 dim'
#set -g status-left ''
#set -g status-right '#[fg=colour233,bg=colour19] %d/%m #[fg=colour233,bg=colour8] %H:%M:%S '
#set -g status-right-length 50
#set -g status-left-length 20

#setw -g window-status-current-style 'fg=colour1 bg=colour19 bold'
#setw -g window-status-current-format ' #I#[fg=colour249]:#[fg=colour255]#W#[fg=colour249]#F '

#setw -g window-status-style 'fg=colour9 bg=colour18'
#setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

#setw -g window-status-bell-style 'fg=colour255 bg=colour1 bold'

## messages
#set -g message-style 'fg=colour232 bg=colour16 bold'

# List of plugins.
# * Installing.
#   - Add new plugin to ~/.tmux.conf with set -g @plugin '...'.
#   - Press *prefix* + I (capital i, as in Install) to fetch the plugin.
#   - You're good to go! The plugin was cloned to ~/.tmux/plugins/ dir and sourced.

# * Uninstalling.
#   - Remove (or comment out) plugin from the list.
#   - Press *prefix* + alt + u (lowercase u as in uninstall) to remove the plugin.
#   - All the plugins are installed to ~/.tmux/plugins/ so alternatively you can find plugin directory there and remove it.

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# Saving sessions across reboots.
set -g @plugin 'tmux-plugins/tmux-resurrect'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf).
run '~/.tmux/plugins/tpm/tpm'
